# ===================================
# CONFIGURAÇÃO DO CRON - GALENICA
# Sistema Independente de Sincronização
# ===================================

# Timezone (use IANA timezone names)
# Exemplo: America/Sao_Paulo, UTC, America/New_York
TIMEZONE=America/Sao_Paulo

# Executar jobs ao iniciar o servidor? (true/false)
# true = executa imediatamente ao iniciar (útil para testes)
# false = aguarda os horários programados
RUN_ON_START=false

# ===================================
# MAGENTO API (SOAP v2)
# ===================================

# URL da API SOAP do Magento
MAGENTO_API_URL=https://www.gfarma.com/api/v2_soap

# Credenciais da API
MAGENTO_API_USER=seu_usuario_aqui
MAGENTO_API_KEY=sua_chave_aqui

# Configurações de sincronização
# LOOKBACK_HOURS: Quantas horas olhar para trás (padrão: 24)
# WINDOW_HOURS: Tamanho das janelas de busca (padrão: 6)
MAGENTO_LOOKBACK_HOURS=24
MAGENTO_WINDOW_HOURS=6

# ===================================
# DATABASE (PostgreSQL ou MySQL)
# ===================================

# URL de conexão com o banco de dados
# MySQL: mysql://user:password@localhost:3306/database
# PostgreSQL: postgresql://user:password@localhost:5432/database
DATABASE_URL=mysql://usuario:senha@localhost:3306/galenica

# ===================================
# JOBS DE SINCRONIZAÇÃO
# ===================================
# Os jobs estão hardcoded no código para evitar erros de configuração
# 
# JOB1: Sincronização dos Últimos 3 Dias
# - Schedule: 0 5,12 * * * (5h e meio-dia)
# - Função: sync3Days()
# - Sincroniza TODOS os pedidos dos últimos 3 dias
# - Captura mudanças de status, pagamentos, cancelamentos
#
# JOB2: Sincronização dos Últimos 50 Pedidos
# - Schedule: 0 0,1,2,3,4,6,7,8,9,10,11,13,14,15,16,17,18,19,20,21,22,23 * * *
# - Função: syncLast50()
# - Sincroniza ~50 pedidos mais recentes
# - Roda toda hora EXCETO 5h e meio-dia (quando JOB1 já roda)

# ===================================
# NOTAS IMPORTANTES
# ===================================
# 
# 1. Este sistema é INDEPENDENTE do dashboard
#    - Conecta diretamente no Magento (SOAP)
#    - Salva diretamente no PostgreSQL/MySQL
#    - Sem timeout de Vercel!
#
# 2. Credenciais necessárias:
#    - MAGENTO_API_USER e MAGENTO_API_KEY
#    - DATABASE_URL com acesso de leitura/escrita
#
# 3. O dashboard pode estar na Vercel
#    - Ele apenas LÊ os dados do banco
#    - Não precisa fazer sincronização
#
# 4. Setup:
#    - npm install
#    - npm run prisma:generate
#    - npm run dev (desenvolvimento)
#    - npm run build && npm start (produção)
